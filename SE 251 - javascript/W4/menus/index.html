<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/home.css">
    <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
    <style>
        #new-menu {
            opacity: 0;
            display: none;
        }
    </style>
</head>
<body>
    <nav><a href="index.html">HOME</a></nav>
    <main>
        <section class="blank"></section>
        <section id="content">
            <div id="menus">
            </div>
        </section>
        <section class="blank"></section>
    </main>
    <script src="js/User.js"></script>
    <script>
        var menus = document.querySelector('#menus');

        // Loading icon code
        const loadDiv = document.createElement('div');
        loadDiv.setAttribute('id', 'load');
        menus.appendChild(loadDiv);

        const startMenu = document.createElement('div');
        startMenu.setAttribute('id', 'start');
        startMenu.style.opacity = '0';

        const startButton = document.createElement('button');
        startButton.appendChild(document.createTextNode('start'));
        startMenu.appendChild(startButton);

        menus.appendChild(startMenu);

        const newMenu = document.createElement('div');
        newMenu.setAttribute('id', 'new-menu');

        // new game button
        const newg = document.createElement('button');
        newg.appendChild(document.createTextNode('New Game'));

        newg.setAttribute(`data-load`, `false`)

        // continue button
        const cont = document.createElement('button');
        cont.appendChild(document.createTextNode('Continue'));

        cont.setAttribute(`data-load`, `true`)

        // high scores button
        const hs = document.createElement('button');
        hs.appendChild(document.createTextNode('High Scores'));

        // append buttons to new menu
        newMenu.appendChild(newg);
        newMenu.appendChild(cont);
        newMenu.appendChild(hs);

        // append new menu to menus
        menus.appendChild(newMenu);

        var timer = setTimeout(loadStartMenu, 1000);
        function loadStartMenu() {
            $('#load').animate({opacity: 0}, 2000, function() {
                menus.removeChild(loadDiv);
                $('#start').animate({opacity: 1}, 2000);
            });
        }
        
        $(document).ready(function() {
            $('#start button').click(function() {
                $('#start').animate({opacity: 0}, 2000, function() {
                    $(this).hide();
                    $('#new-menu').css('display', 'block').animate({opacity: 1}, 2000);
                });
            });
        });

        newg.addEventListener('click', function(e) {
            window.location.href = `lobby.html?load=${e.target.dataset.load}`;
        });

        cont.addEventListener('click', function(e) {
            window.location.href = `lobby.html?load=${e.target.dataset.load}`;
        });

        hs.addEventListener('click', function() {
            window.location.href = 'hs.html';
        });

    </script>
</body>
</html>